<script>{
	"title": "jQuery UI 1.11 Upgrade Guide",
	"toc": true
}</script>

## Overview

This guide will assist in upgrading from jQuery UI 1.10.x to jQuery UI 1.11.x.
All changes are listed below, organized by plugin, along with how to upgrade
your code to work with jQuery UI 1.11.

## General changes

We made some changes that affect all source files and the ways you can access and load them in your applications. Our goal was to simplify where possible, while supporting more environments, specifically AMD and bower.

### Renamed files

We've dropped the "jquery.ui." prefix from all source files, so for example "jquery.ui.accordion.js" is now "accordion.js". This makes usage with AMD easier (see below) and makes it generally easier to deal with the individual source files.

### AMD support

jQuery UI now supports AMD out-of-the-box. That means that you can specify "ui/autocomplete" as a dependency in your module, and an AMD script loader like require.js will resolve all the dependencies that "autocomplete" has. You can learn more about using jQuery UI with AMD on [learn.jquery.com](http://learn.jquery.com/jquery-ui/environments/amd/).

### Bower support

jQuery UI now supports bower out-of-the-box. That means that you can install jQuery UI with bower by running `bower install jquery-ui`. You can learn more about using jQuery UI with bower on [learn.jquery.com](http://learn.jquery.com/jquery-ui/environments/bower/).

### Simplified custom and quick downloads

We've simplified our download packages. Instead of including all demos and source files, we now only include the concatenated files. The new structure looks like this:

<pre>
.
├── images
│   └── ...
├── index.html
├── jquery-ui.css
├── jquery-ui.js
├── jquery-ui.min.css
├── jquery-ui.min.js
├── jquery-ui.structure.css
├── jquery-ui.structure.min.css
├── jquery-ui.theme.css
├── jquery-ui.theme.min.css
└── jquery.js
</pre>

The `jquery-ui.structure.css` file provides the structural CSS rules (such as margins and positioning), and the `jquery-ui.theme.css` file contains the theming rules (such as backgrounds, colors, and fonts). This setup allows you to easily change themes by swapping in new `jquery-ui.theme.css` files. You can also build a theme from scratch by building on top of `jquery-ui.structure.css`. The `jquery-ui.css` file contains both `jquery-ui.structure.css` and `jquery-ui.theme.css`.

The `index.html` file contains a demo per selected component and includes your selected theme. This matches the demo file that were included in previous custom downloads. The same applies to the `jquery.js` file, which is a copy of jQuery Core.

If you want the complete jQuery UI source files, demos, and tests, you can get them from <https://github.com/jquery/jquery-ui/releases>.

### Discontinued IE7 Support

As of this release we are no longer accepting bug reports for IE7 issues. We have also removed IE7 from our testing infrastructure. The IE7 workarounds are still present in the code, but we will remove them for jQuery UI 1.12.


## Core

### Deprecate .focus( n )

[(#9646)](http://bugs.jqueryui.com/ticket/9646) The modified version of the jQuery Core `focus` method is now deprecated. jQuery UI was using this only in our dialog widget, where we've replaced the delayed focus call with a timeout.

Before:

```js
element.focus( 1 );
```

After:

```js
setTimeout(function() {
    element.focus();
});
```

### Deprecated .zIndex()

[(#9061)](http://bugs.jqueryui.com/ticket/9061) .zIndex() is now deprecated in favor of the new .ui-front/appendTo logic used by all widgets that display an element on top of the page, like dialog and autocomplete.

This method was used by dialog. Since [removing dialog's `zIndex` option](http://jqueryui.com/upgrade-guide/1.10/#removed-zindex-option) and adding it's [`appendTo` option](http://api.jqueryui.com/dialog/#option-appendTo), this plugin method is no longer necessary. If you were using it, check out how dialog now deals with stacking and `z-index`.

### Removed $.ui.hasScroll()

[(#9190)](http://bugs.jqueryui.com/ticket/9190) The deprecated and undocumented `$.ui.hasScroll()` method has been removed as it was only used by the resizable interaction.

### Removed $.ui.keyCode.NUMPAD_*.

[(#9269)](http://bugs.jqueryui.com/ticket/9269) The following key code constants have been removed as they were not used by jQuery UI:

* `$.ui.keyCode.NUMPAD_ADD`
* `$.ui.keyCode.NUMPAD_DECIMAL`
* `$.ui.keyCode.NUMPAD_DIVIDE`
* `$.ui.keyCode.NUMPAD_ENTER`
* `$.ui.keyCode.NUMPAD_MULTIPLY`
* `$.ui.keyCode.NUMPAD_SUBTRACT`



## Accordion

### Remove deprecated content property in create event

[(#8999)](http://bugs.jqueryui.com/ticket/8999) The deprecated `content` property in the create event was removed. The correct property to use is `panel`.


## Dialog

### Removed deprecated position handling

[(#8825)](http://bugs.jqueryui.com/ticket/8825) The array and string notations for dialog's position option were deprecated in 1.10 and are now gone. Use the object-notation of the [position option](http://api.jqueryui.com/dialog/#option-position).


### Dialog: Switch back to shuffling z-index, but only look at .ui-front siblings.

[(#9166)](http://bugs.jqueryui.com/ticket/9166), [(#9364)](http://bugs.jqueryui.com/ticket/9364) In 1.10, we rewrote dialog's `moveToTop` method to move the DOM elements that shared the `.ui-front` class within the same parent. This solved a lot of problems that the previous, `z-index` based solution had, but it also created some new issues due to moving the dialog's DOM element around in the DOM. In 1.11, we've kept the approach from 1.10, but also added back `z-index` handling, although in a much more restricted algorithm. This solves problems with reloading of flash content and resetting of scroll positions, while still being much more straight forward then the old approach.

This should be a pure bug fix, though if you use the dialog widget along with other elements that use `z-index`, you may need to test the stacking behaviour when updating to 1.11.


## Position

### Removed `offset` option; use `my` or `at`

([#6982](http://bugs.jqueryui.com/ticket/6982)) The `offset` option has been removed in favor of providing offset information in `my` or `at`. See [the 1.9 deprecation notice](http://jqueryui.com/upgrade-guide/1.9/#deprecated-offset-option-merged-into-my-and-at) for full details.


## Menu

### Add `items` option for better definition of menu items in non parent-child structures (no ticket either)

[(31e705a)](https://github.com/jquery/jquery-ui/commit/31e705ab324ec830062eee173a112551f7c919ea) A new option was added to the menu widget. [items](http://api.jqueryui.com/menu/#option-items) allows you to use other markup then the default nested lists where the menu items aren't immediate children of the menu container parent.

### Remove the requirement to use anchors in menu items

[(3a61627)](https://github.com/jquery/jquery-ui/commit/3a61627a501cb7ba1ce80046bfabbff0f7f2f517) The menu widget no longer expects list items to contain anchors. Markup containing anchors still work, though there may be styling issues. Its recommended to remove the anchors in the markup.

The autocomplete and selectmenu widgets, both using menu internally, were updated to remove the anchors.

### Simplify styling. Remove rounded corners, reduce spacing. (no ticket either)

[(9910e93)](https://github.com/jquery/jquery-ui/commit/9910e938aad1090339a2c7f60693093ee18aba82) This changes the structural styles for the menu widget. Since those include margin and padding, the menu looks different now. The menu is more compact, allowing to show more items at once without scrolling.

If you're using the menu widget, check if the new style fits into your page or if any CSS overrides may need to be adjusted.


## Slider

### Add Windows 8 touch support

[(#9709)](http://bugs.jqueryui.com/ticket/9709) The slider widget now supports usage on Windows 8 touch devices.

### Switch handles from anchors to spans

[(#9890)](http://bugs.jqueryui.com/ticket/9890) The slider widget now uses `<a>` elements instead of `<span>` elements for its handles to workaround an issue with usage in some single-page application frameworks. The handles still use the same `ui-slider-handle` class name as a styling hook.



## Spinner

### Add `isValid()` method

[(#9542)](http://bugs.jqueryui.com/ticket/9542) The spinner widget now exposes an `isValid()` for determining whether the value of the spinner's input is valid. For example the following returns `true`:

```
$( "<input value=1>" )
    .spinner({ step: 1 })
    .spinner( "isValid" );
```

And the following returns `false`:

```
$( "<input value=1>" )
    .spinner({ step: 2 })
    .spinner( "isValid" );
```


## Widget

### `$.widget()` returns the widget's constructor.

[(#9467)](http://bugs.jqueryui.com/ticket/9467) The `$.widget()` method now returns the widget's constructor instead of `undefined`. As an example the following code creates a dialog extension, and then uses the new widget's constructor function to create an instance on a newly created `<div>`:

```
var redDialog = $.widget( "myNamespace.redDialog", $.ui.dialog, {
    _create: function() {
        this._super();
        this.element.css( "color", "red" );
    }
});
redDialog( {}, "<div>jQuery UI Rocks!</div>" );
```

The same constructor functions are also returned when you use the jQuery UI widgets in an AMD context. For more details on how to use the widget's constructor functions, see our guide on [using jQuery UI with AMD](http://learn.jquery.com/jquery-ui/environments/amd/).

### Implement `instance()` method on the bridge to return widget instance

[(#9030)](http://bugs.jqueryui.com/ticket/9030) A new `instance()` method is now available on the plugin bridge. The method provides access to the widget's instance without going through `$.data()`.

Old:

```
var instance = $( "<div>" )
    .progressbar()
    .data( "ui-progressbar" );
```

New:

```
var instance = $( "<div>" )
    .progressbar()
    .progressbar( "instance" );
```

Unlike other plugin methods, the `instance()` method is safe to call on any element. If the element is not an instance of the given widget, the method returns `undefined`. For example the following code throws an error:

```
// Uncaught Error: cannot call methods on dialog prior to initialization; attempted to call method 'open'
$( "#not-a-dialog" ).dialog( "open" );
```

And this returns `undefined`:

```
$( "#not-a-dialog" ).dialog( "instance" );
```

### Make .enable() and .disable() act via ._setOptions() instead of ._setOption()

This allows custom widgets to override `._setOptions()` to implement custom handling for the `disabled` option. Since that is the preferred method for option handling, there should be no reason to override `._setOption()` after this change. Since the one calls the other, it shouldn't break any existing widget though.

### Only remove hover and focus classes when disabling, not enabling.

[(#9558)](http://bugs.jqueryui.com/ticket/9558) Previously, calling `.enable()` on a widget that was already enalbed would remove the hover and focus classes. This fixes that bug and it shouldn't have any negative consequences. In the unlikely case that your widget relies on the old behaviour, you can override the `.enable()` method.

### Stop setting `ui-state-disabled` and `aria-disabled` by default when the `disabled` option is set.

[(#5973)](http://bugs.jqueryui.com/ticket/5973) [(#5974)](http://bugs.jqueryui.com/ticket/5974) [(#6039)](http://bugs.jqueryui.com/ticket/6039) The widget factory used to manage the `ui-state-disabled` class name and `aria-disabled` attribute as a widget's `disabled` option was toggled. That behavior has been removed as it created issues in some widgets where `ui-state-disabled` and `aria-disabled` did not make sense, such as the resizable widget.

If you have a themeable widget with a `disabled` option, you can manage `ui-state-disabled` and `aria-disabled` in the widget's `_setOption()` method. For instance this is how the progressbar widget handles its `disabled` option changing:

```
_setOption: function( key, value ) {
	...
	if ( key === "disabled" ) {
		this.element
			.toggleClass( "ui-state-disabled", !!value )
			.attr( "aria-disabled", value );
	}
	this._super( key, value );
}
```

### Support events with dashes and colons

[(#9708)](http://bugs.jqueryui.com/ticket/9708) The widget factory's `_on()` method now supports event names with dashes and colons. As an example the following creates a widget that listens for two events—one with a dash and one with a colon:

```
$.widget( "myNamespace.myWidget", {
    _create: function() {
        this._on({
            "foo-bar": function() {
                 console.log( "foo-bar" );
            },
            "foo:bar": function() {
                console.log( "foo:bar" );
            }
        });
    }
});
```

And the following creates an instance of the above widget and triggers the two events:

```
$( "<div>" ).myWidget()
    .trigger( "foo-bar" )
    .trigger( "foo:bar" );
```

## Effects

### Give puff and size effects their own files

Previously, the puff, size and scale effects shared a single file—`jquery.ui.effect-scale.js`. Now, each of these effects have their own files—`effect-puff.js`, `effect-scale.js`, and `effect-size.js`, respectively.
